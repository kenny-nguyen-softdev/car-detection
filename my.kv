MainWindow:
    TheFirstScreen:
    TheSecondScreen:
    TheThirdScreen:
    TheFourthScreen:
    TheConvertScreen:


<WindowExit>:
    title: "EXIT APP"
    size_hint: .5, .5   
    auto_dismiss: False
    title_align: "center"
    title_font: "font2" 
    title_size: 25
<WindowLoading>:
    title: "LOADING"
    size_hint: .3, .5   
    title_align: "center"
    title_font: "font2" 
    title_size: 25
<WindowPopup>:
    title: "PLEASE CHOOSE IMAGE"
    size_hint: .7, .7   
    title_align: "center"
    title_font: "font2" 
    title_size: 25
<Content_Convert>:
    BoxLayout:
        canvas.before:
            Color:
                rgba:(84/255,80/255,76/225,1)
            Rectangle:
                size: root.width,root.height
                pos:self.pos
        orientation: "vertical"
        pos_hint: {"center_x":0.5,"center_y": 0.5}
        spacing: 10
        padding: 10
        FileChooser:
            id: filechooser
            font_name: "font2"
            font_size: 40
            FileChooserListLayout:
        BoxLayout:
            size_hint: (1, 0.2)
            pos_hint: {'center_x': .5, 'center_y': .5}
            spacing: 20
            RoundedButtonContent1:
                text: "Cancel"
                # on_release: root.cancel_popup()
                on_release: root.cancel()
                font_size: 25
                font_name: "font2"
                color: (0,0,0)
            RoundedButtonContent2:
                id: ldbtn
                text: "Load"
                font_size: 25
                font_name: "font2"
                color: (0,0,0)
                on_release: root.load(filechooser.selection)
                disabled: True if filechooser.selection==[] else False

<Content_Loading>:
    BoxLayout:
        orientation: "vertical"
        size_hint: 2.9, .9
        pos_hint: {"center_x": 0.5,"center_y": 0.5}
        Image:
            source: "./Images/loading.jpg"
            allow_stretch: True


            


<NotificationExitApp>:
    BoxLayout:
        orientation: 'vertical'     
        spacing: 10
        pos_hint: {"center_x":0.5,"center_y": 0.5}
        Label:
            text: "Are u sure to exit app"
            font_size: 30
            font_name: "font2"
        BoxLayout:
            size_hint: (1, 0.4)
            pos_hint: {'center_x': .5, 'center_y': .5}
            spacing: 20
            RoundedButtonContent1:
                text: "Cancel"
                font_size: 25
                size_hint: .7,.7
                font_name: "font2"
                color: (243/255,246/255,244/255)
                on_release: root.cancel()
            RoundedButtonContent2:
                id: eixt_app
                text: "Exit"
                font_size: 25
                size_hint:.7,.7
                font_name: "font2"
                color: (243/255,246/255,244/255)
                on_release: root.exit_app()
<RoundedButtonContent1@Button>:
	background_color:(0,0,0,0)
	background_normal: ""
	canvas.before:
		Color:
			rgba: (40/255,39/255,38/225,1)
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius: [30]
<RoundedButtonContent2@Button>:
	background_color:(0,0,0,0)
	background_normal: ""
	canvas.before:
		Color:
			rgba: (68/255,68/255,68/225,1)
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius: [30]

<Content>:
    BoxLayout:
        canvas.before:
            Color:
                rgba:(84/255,80/255,76/225,1)
            Rectangle:
                size: root.width,root.height
                pos:self.pos
        orientation: "vertical"
        pos_hint: {"center_x":0.5,"center_y": 0.5}
        spacing: 10
        padding: 10
        FileChooser:
            id: filechooser
            font_name: "font2"
            font_size: 40
            FileChooserListLayout:
        BoxLayout:
            size_hint: (1, 0.2)
            pos_hint: {'center_x': .5, 'center_y': .5}
            spacing: 20
            RoundedButtonContent1:
                text: "Cancel"
                # on_release: root.cancel_popup()
                on_release: root.cancel()
                font_size: 25
                font_name: "font2"
                color: (0,0,0)
            RoundedButtonContent2:
                id: ldbtn
                text: "Load"
                font_size: 25
                font_name: "font2"
                color: (0,0,0)
                on_release: root.load(filechooser.selection)
                disabled: True if filechooser.selection==[] else False
<WindowLoadVideo>:
    title: "PLEASE CHOOSE FILE VIDEO"
    size_hint: .7, .7   
    auto_dismiss: False
    title_align: "center"
    title_font: "font2" 
    title_size: 25



<TheFirstScreen>:
    # canvas:
    #     Color:
    #         rgba: 1, 1, 1, 1
    #     Rectangle:
    #         pos: self.pos
    #         size: self.size
    # AsyncImage:
    #     pos_hint: {"center_x": 0.5,"center_y": 0.5}
    #     # size_hint: 0.1,0.1
    #     source: 'https://cdn.dribbble.com/users/1342032/screenshots/3180491/media/e53dae8744d298914396a408c51b67a9.gif'
    #     anim_delay: 0.05
    name: "first"
    id: my_widget1
    BoxLayout:
        id: banner
        size: root.width,root.height
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                source: "./Images/background_banner.jpg"
                size: self.width,180
                pos: 0,530
        GridLayout:
            cols: 3
            size: self.width,180
            spacing: 20
            pos_hint: {"center_x":0.5,"center_y":0.89}
            Image:
                source: "./Images/logoHcmute.png"
                size_hint: 0.15,0.15
                allow_stretch: True
            BoxLayout:
                size: 100,100
                padding: 260
                orientation:'vertical'
                Label:
                    text: "FINAL PROJECT"
                    font_size: 25
                    color: (0,0,0,1)
                    bold: True
                    font_name: "font2"
                Label:
                    text: "CAR DETECTION USING IMAGE PROCESSING"
                    font_size: 30
                    color: (0,0,0,1)
                    bold: True
                    font_name: "font2"
                Label:
                    text: "AND PATTERN RECOGNITION TECHNIQUES."
                    font_size: 30
                    color: (0,0,0,1)
                    bold: True
                    font_name: "font2"
            Image:
                source: "./Images/logokhoadaotaochatluongcao.png"
                size_hint: 0.15,0.15
                allow_stretch: True
    BoxLayout:
        id: main
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                source: "./Images/background2.jpg"
                size: root.width,root.height - 160
                pos: 0,0
        GridLayout:
            cols: 2
            spacing: 30
            size_hint: 0.5,0.5
            pos_hint: {"center_x":0.5,"center_y":0.4}
            padding: 80
            RoundedButton1:
                text:"MEMBERS IN TEAM"
                font_size: 25
                outline_color: (243/255,246/255,244/255)
                outline_width: 3
                font_name: "font2"
                color: (0,0,0)
                bold: True
                on_press: 
                    app.root.current = "second"
                    root.manager.transition.direction = "left"
            RoundedButton2:
                text:"REPORT PROJECT"
                font_size: 25
                outline_color: (243/255,246/255,244/255)
                outline_width: 3
                font_name: "font2"
                color: (0,0,0)
                bold: True
                on_press: 
                    app.root.current = "third"
                    root.manager.transition.direction = "left"
            RoundedButton3:
                text:"PROJECT PARTICIPATION RATE"
                font_size: 25
                outline_color: (243/255,246/255,244/255)
                outline_width: 3
                font_name: "font2"
                color: (0,0,0)
                bold: True
                on_press: 
                    app.root.current = "fourth"
                    root.manager.transition.direction = "left"
            RoundedButton4:
                text:"EXIT"
                font_size: 25
                outline_color: (243/255,246/255,244/255)
                outline_width: 3
                font_name: "font2"
                color: (0,0,0)
                bold: True
                on_press: root.open_popup()
<RoundedButton1@Button>:
	background_color:(0,0,0,0)
	background_normal: ""
	canvas.before:
		Color:
			rgba: (40/255,39/255,38/225,1)
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius: [30]
<RoundedButton2@Button>:
	background_color:(0,0,0,0)
	background_normal: ""
	canvas.before:
		Color:
			rgba: (139/255,126/255,116/225,1)
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius: [30]
<RoundedButton3@Button>:
	background_color:(0,0,0,0)
	background_normal: ""
	canvas.before:
		Color:
			rgba: (134/255,129/255,124/225,1)
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius: [30]
<RoundedButton4@Button>:
	background_color:(0,0,0,0)
	background_normal: ""
	canvas.before:
		Color:
			rgba: (214/255,202/255,176/225,1)
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius: [30]
                

<TheSecondScreen>:
    name: "second"
    id: my_widget2
    GridLayout:
        cols:3
        padding: 150
        spacing: 20
        pos_hint: {'center_x': 0.6,'center_y': 0.5}
        Image:
            source: "./Images/member.jpg"
            size_hint: 0.1,0.1
        Label:
            text:'Huynh Hung Phu'
            font_size: 25
            font_name: "font2"
        Label:
            text:'MSSV: 20110540'
            font_size: 25
            font_name: "font2"
        Image:
            source: "./Images/member.jpg"
            size_hint: 0.1,0.1
        Label:
            text:'Nguyen Dinh Quang Huy'
            font_size: 25
            font_name: "font2"
        Label:
            text:'MSSV: 20110494'
            font_size: 25
            font_name: "font2"
        Image:
            source: "./Images/member.jpg"
            size_hint: 0.1,0.1
        
        Label:
            text:'Nguyen Trung Kien'
            font_size: 25
            font_name: "font2"
        Label:
            text:'MSSV: 20110506'
            font_size: 25
            font_name: "font2"
    RoundedButtonSecond:
        text: "Go Back Home"
        color: (0,0,0)
        outline_color: (243/255,246/255,244/255)
        outline_width: 3
        size_hint: 0.2,0.1
        bold:True
        font_size: 40
        font_name: "font2"
        pos_hint: {'center_x': 0.15,'center_y': 0.1}
        on_press: 
            app.root.current = "first"
            root.manager.transition.direction = "right"
            # root.Reset()
        border:(16,16,16,16)


<RoundedButtonSecond@Button>:
	background_color:(0,0,0,0)
	canvas.before:
		Color:
			rgba: (40/255,39/255,38/225,1)
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius: [30]

<TheThirdScreen>:
    name: "third"
    id: my_widget3
    canvas.before:
        Color:
            rgba:(118/255,113/255,113/255,1)
        Rectangle:
            size: root.width,root.height
            pos:self.pos
    BoxLayout:
        id: layout
        size_hint:0.65,0.65
        pos_hint: {"center_x": 0.36,"center_y": 0.58}
        VideoPlayer:
            canvas.before:
                Color:
                    rgba: (43/255,43/255,22/225,1) 
                Line:
                    rounded_rectangle: (self.pos[0],self.pos[1],self.size[0] + 10,self.size[1] + 10,18)
                    width: 2
            id: video3
            source: ""
            state: "play"
            options: {'eos':'loop'}
            allow_fullscreen: False
            allow_stretch: True 
    RoundedButtonThird:
        size_hint:0.2,0.1
        text: "DETECT CAR"
        font_name: "font2"
        pos_hint: {"center_x": 0.85,"center_y": 0.87}
        on_release: 
            root.detect_object()
    RoundedButtonThird:
        size_hint:0.2,0.1
        text: "DETECT LICENSE PLATE"
        font_name: "font2"
        pos_hint: {"center_x": 0.85,"center_y": 0.67}
        on_release: root.detection_license_car()
    RoundedButtonThird:
        size_hint:0.2,0.1
        text: "CONVERT TO TEXT"
        font_name: "font2"
        pos_hint: {"center_x": 0.85,"center_y": 0.47}
        on_press: 
            app.root.current = "convert"
            root.manager.transition.direction = "left"
    RoundedButtonThird:
        size_hint:0.2,0.1
        text: "COUNT THE NUMBER OF CAR"
        font_name: "font2"
        pos_hint: {"center_x": 0.85,"center_y": 0.27}
        on_release: root.couting_car()
    Label:
        id: NameOfMember1
        text: "Huynh Hung Phu"
        font_size: 30
        font_name: "font2"
        pos_hint: {'center_x':0.85,'center_y':0.17}
    Label:
        id: NameOfMember2
        text: "Nguyen Dinh Quang Huy"
        font_size: 30
        font_name: "font2"
        pos_hint: {'center_x':0.85,'center_y':0.11}
    Label:
        id: NameOfMember3
        text: "Nguyen Trung Kien"
        font_size: 30
        font_name: "font2"
        pos_hint: {'center_x':0.85,'center_y':0.04}
    RoundedButtonThird:
        size_hint:0.2,0.1
        text: "LOAD VIDEO"
        outline_color: (243/255,246/255,244/255)
        outline_width: 3
        color: (0,0,0)
        font_name: "font2"
        font_size: 25
        pos_hint: {"center_x": 0.5,"center_y": 0.1}
        on_release: root.open_popup()
    RoundedButtonThird:
        text: "Go Back Home"
        color: (0,0,0)
        outline_color: (243/255,246/255,244/255)
        outline_width: 3
        size_hint: 0.2,0.1
        bold:True
        font_size: 25
        font_name: "font2"
        pos_hint: {'center_x': 0.1,'center_y': 0.1}
        on_press: 
            app.root.current = "first"
            root.manager.transition.direction = "right"
            # root.pause_video()
        border:(16,16,16,16)
    Label:
        id: complete
        text: ""
        font_size: 30
        font_name: "font2"
        pos_hint: {'center_x':0.05,'center_y':0.2}

<RoundedButtonThird@Button>:
	background_color:(0,0,0,0)
	canvas.before:
		Color:
			rgba: (40/255,39/255,38/225,1)
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius: [30]


<TheFourthScreen>:
    name: "fourth"
    id: my_widget4
    RoundedButtonFourth:
        text: "Go Back Home"
        color: (0,0,0)
        outline_color: (243/255,246/255,244/255)
        outline_width: 3
        size_hint: 0.3,0.3
        bold:True
        font_size: 40
        font_name: "font2"
        pos_hint: {'center_x': 0.5,'center_y': 0.5}
        on_press: 
            app.root.current = "first"
            root.manager.transition.direction = "right"
            # root.Reset()
        border:(16,16,16,16)

<RoundedButtonFourth@Button>:
	background_color:(0,0,0,0)
	canvas.before:
		Color:
			rgba: (40/255,39/255,38/225,1)
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius: [30]
        

<TheConvertScreen>:
    name: "convert"
    id: convert5
    # slider_text: silder_label
    canvas.before:
        Color:
            rgba:(65/255,93/255,67/225,1)
        Rectangle:
            size: root.width,root.height
            pos:self.pos
    GridLayout:
        cols:2
        size: root.width - 300,root.height - 400
        pos_hint: {'center_x': 0.5,'center_y': 0.8}
        padding: 40
        spacing: 10
        Image:
            id: my_image_convert
            size_hint: 0.4,0.4
            source: "./Images/image5.png"
        Image:
            id: new_image_convert
            source: "./Images/image5.png"
            size_hint: 0.4,0.4
    Label:
        id: title
        text: "Convert to text"
        font_size: 30
        font_name: "font2"
        pos_hint: {'center_x':0.5,'center_y':0.35}
    Label:
        id: convert_label
        text: ""
        font_size: 30
        font_name: "font2"
        pos_hint: {'center_x':0.5,'center_y':0.5}
    RoundedButtonFifth:
        text: "CHOOSE FILE"
        color: (0,0,0)
        outline_color: (243/255,246/255,244/255)
        outline_width: 3
        size_hint: 0.2,0.1
        bold:True
        font_size: 30
        font_name: "font2"
        pos_hint: {'center_x':0.5,'center_y':0.35}
        on_press: root.open_popup()
        border:(16,16,16,16)
    GridLayout:
        cols:20
        padding: 50
        size_hint:1.2,0.3
        spacing: 20
        pos_hint: {'center_x': 0.65,'center_y': 0.1}
        RoundedButtonFifth:
            text: "CONVERT TO TEXT"
            color: (0,0,0)
            outline_color: (243/255,246/255,244/255)
            outline_width: 3
            size_hint: 0.2,0.1
            bold:True
            font_size: 30
            font_name: "font2"
            pos_hint: {'center_x': 0.5,'center_y': 0.5}
            on_press: root.convert_image()
            border:(16,16,16,16)
        RoundedButtonFifth:
            text: "HOME"
            color: (0,0,0)
            outline_color: (243/255,246/255,244/255)
            outline_width: 3
            size_hint: 0.2,0.1
            bold:True
            font_size: 30
            font_name: "font2"
            pos_hint: {'center_x': 0.5,'center_y': 0.05}
            on_press: 
                app.root.current = "first"
                root.manager.transition.direction = "right"
                # root.Reset()
            border:(16,16,16,16)

<RoundedButtonFifth@Button>:
	background_color:(0,0,0,0)
	background_normal: ""
	canvas.before:
		Color:
			rgba: (35/255,51/255,41/225,1)
		RoundedRectangle:
			size: self.size
			pos: self.pos
			radius: [30]